<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>메인 페이지</title>
    <link href="/map.css" rel="stylesheet">
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <script type="module" src="/js/favorite.js" defer></script>
    <script src="/js/btnActive.js"></script>
    <script src="/js/map.js"></script>
    <script src="/js/search.js"></script>
    <script src="/js/pagination.js"></script>
    
</head>
<body>
    <div class="container">
        <div class="search-area" id="searchArea">
            <div class="search-top">
                <div class="top-top">
                    <input type="text" class="inputbox" placeholder="장소를 입력하세요" id="searchInput">
                </div>
                <div class="top-bottom">
                    <div class="btnArea-search" id="btnSearch" onclick="handleButtonClick('search')">
                        <button class="btn-search" onclick="searchPlaces()">검색</button>
                    </div>
                    <div class="btnArea-my" id="btnMy" onclick="handleButtonClick('my')">
                        <% if (isLoggedIn) { %>
                            My
                        <% } else { %>
                            <a href="/login">로그인</a> 
                        <% } %>
                    </div>
                </div>
            </div>
            <div class="search-bottom" id="pagination-container">
                <div id="results-container">
                    <!-- 검색 결과가 여기에 동적으로 추가됩니다 -->
                </div>
                <div class="pagination" id="pagination-buttons">
                    <!-- 페이징 버튼이 여기에 동적으로 추가됩니다 -->
                    <% if (isLoggedIn) { %>
                        <!-- 로그인 상태일 때 로그아웃 버튼 추가 -->
                        <form action="/logout" method="POST" class="logout-form">
                            <h1>Welcome, <%= user ? user.username : 'Guest' %>!</h1>
                            <button type="submit" class="btn-logout">로그아웃</button>
                        </form>
                    <% } %>    
                </div>          
            </div>
        </div>
        <div class="map-area">
            <div class="map" id="map"></div>
        </div>
    </div>

<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=03963931ac47a435fe5c53e993bbb32d"></script>
<script>
    const locationList = <%- JSON.stringify(locationList) %>;
    const username = '<%= user ? user.username : '' %>';  
</script>
</body>
</html>